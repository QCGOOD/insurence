<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>Title</title>
    <link rel="stylesheet" href="css/project.css">
    <script src="js/libs/jquery-3.0.0.min.js"></script>
    <script src="js/libs/jquery-weui.min.js"></script>
    <script src="js/libs/city-picker.js"></script>
    <script src="js/libs/vue2.0.js"></script>
    <script src="js/libs/hammer.min.js"></script>
    <script src="js/project.js"></script>
    <style>
        body{padding: 30px 20px;background-color: rgba(0, 0, 0, 0.75);}

        /* 选择城市与学校 */
        .weui_dialog_bd .weui_input{color: #333;}
    </style>
</head>
<body>
<div id="app" style="display: none;">
    <!-- 选择学校 -->
    <div>
        <div class="weui_mask weui_mask_visible"></div>
        <div class="weui_dialog weui_dialog_visible " style="top:21%;">
            <div class="weui_dialog_hd" style="border-bottom: 0;">
                <div class="weui_dialog_title">选择城市与学校</div>
            </div>
            <div class="weui_dialog_bd weui_cells_access" style="padding-top: 0;">
                <div class="weui_cell">
                    <div class="weui_cell_bd weui_cell_primary">
                        <input class="weui_input " placeholder="请选择您所在城市" type="text" id='city-picker' >
                    </div>
                    <div class="weui_cell_ft"></div>
                </div>

                <div class="weui_cell">
                    <div class="weui_cell_bd weui_cell_primary">
                        <input class="weui_input " placeholder="请选择学校类型" type="text" id='class-picker'>
                    </div>
                    <div class="weui_cell_ft"></div>
                </div>

                <div class="weui_cell">
                    <div class="weui_cell_bd weui_cell_primary">
                        <input class="weui_input " placeholder="请选择您所在学校" type="text" id='school-picker'>
                    </div>
                    <div class="weui_cell_ft"></div>
                </div>

            </div>
            <div class="weui_dialog_ft">
                <a onclick="submitAddress()" class="weui_btn_dialog primary">确定</a>
            </div>
        </div>
    </div>
</div>

<script>
    var vm = new Vue({
        el: '#app',
        data: function () {
            return {
                /* 地址表单 */
                form:{
                    address:'',
                    schoolName:'',
                    className:''
                },
                dataSchool:[

                ]
            }
        },
        methods: {

        },
        /* 初始化数据 */
        created: function () {

            setTimeout(function () {
                /* 初始化城市选择器 */
                $("#city-picker").cityPicker({
                    onChange: function (e) {
                        vm.form.address = e.displayValue.join(" ");
                    }
                });

                /* 初始化学校选择器 */
                $("#school-picker").picker({
                    title: "请选择您的学校",
                    cols: [
                        {
                            textAlign: 'center',
                            values: ['华师附中', '华师附小'],
                            displayValues:['华师附中', '华师附小']
                        }
                    ],
                    onChange: function (e) {
                        vm.form.schoolName = e.value.join(" ");
                    }
                });

                /* 初始化学校类型选择器 */
                $("#class-picker").picker({
                    title: "请选择学校类型",
                    cols: [
                        {
                            textAlign: 'center',
                            values: ['幼儿园','小学','初中','高中','大学']
                        }
                    ],
                    onChange: function (e) {
                        vm.form.className = e.value.join(" ");
                    }
                });
            },500);
        }
    });

    /* 保存学校 */
    function submitAddress() {
        if(!vm.form.address || !vm.form.schoolName || !vm.form.className){
            $.toast("信息不完整", "text");
            return false
        }
        vm.showDialog = false;
        console.log(vm.form.address, vm.form.schoolName, vm.form.className);
        window.location = 'index.html';
        // TODO:保存城市、学校、与班级
        $.post('',vm.form, function (data) {
        },'json');
    }
</script>

</body>
</html>